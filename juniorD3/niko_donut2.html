<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">

<script src="http://d3js.org/d3.v3.min.js"></script>
<script src="nv.d3.min.js"></script>

</head>
<body>
  <svg id="chart" style="width:500; height:500;"></svg>    
</body>

<script type="text/javascript">

  d3.csv("nv_day_of_week.csv", function(error, data){
    //console.log(data)
    // create an empty object that nv is expecting
    var donutData = [
      {
        key: "totals",
        values: []
      }
    ];

        // populate the empty object with your data
    data.forEach(function (d){
      d.value = +d.value
      donutData[0].values.push(d)
    })       

  nv.addGraph(function() {
    
      var chart = nv.models.pieChart()
          .x(function (d) { console.log(d); return d.label })
          .y(function (d) { return d.value })
          .showLabels(true)
          .labelThreshold(.05)
          .labelType("percent")
          .donut(true)
          .donutRatio(0.35);
 
      d3.select('#chart')
          .datum(donutData)
          .attr("id", function (d) { console.log(d); })
        .transition().duration(500)
            .call(chart);
 
      nv.utils.windowResize(chart.update);
      return chart;
  });

 });

</script>
</html>